{% extends "base.html" %}

{% block title %}Home - Trading Bot Control Panel{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-12">
        <h2>ü§ñ Trading Bot Control Panel</h2>
        <p class="text-muted">–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤—ã–º –±–æ—Ç–æ–º</p>
    </div>
</div>

<div id="system-info-container" class="row mt-4">
    <div class="col-lg-12 text-center">
        <p><i class="bi bi-hourglass-split"></i> –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏—Å—Ç–µ–º–µ...</p>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-6 mb-3">
        <div class="card">
            <div class="card-header">
                <h5><i class="bi bi-speedometer2"></i> Dashboard</h5>
            </div>
            <div class="card-body">
                <p>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–¥–µ–ª–æ–∫</p>
                <a href="/dashboard" class="btn btn-primary w-100">–ü–µ—Ä–µ–π—Ç–∏ ‚Üí</a>
            </div>
        </div>
    </div>

    <div class="col-md-6 mb-3">
        <div class="card">
            <div class="card-header">
                <h5><i class="bi bi-gear"></i> –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</h5>
            </div>
            <div class="card-body">
                <p>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –±–æ—Ç–∞ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π</p>
                <a href="/config" class="btn btn-primary w-100">–ü–µ—Ä–µ–π—Ç–∏ ‚Üí</a>
            </div>
        </div>
    </div>

    <div class="col-md-6 mb-3">
        <div class="card">
            <div class="card-header">
                <h5><i class="bi bi-file-text"></i> –õ–æ–≥–∏</h5>
            </div>
            <div class="card-body">
                <p>–ü—Ä–æ—Å–º–æ—Ç—Ä, –ø–æ–∏—Å–∫ –∏ –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ —Ç–æ—Ä–≥–æ–≤–ª–∏</p>
                <a href="/logs-view" class="btn btn-primary w-100">–ü–µ—Ä–µ–π—Ç–∏ ‚Üí</a>
            </div>
        </div>
    </div>

    <div class="col-md-6 mb-3">
        <div class="card">
            <div class="card-header">
                <h5><i class="bi bi-shield-lock"></i> Environment</h5>
            </div>
            <div class="card-body">
                <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API –∫–ª—é—á–∞–º–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è</p>
                <a href="/env-config" class="btn btn-primary w-100">–ü–µ—Ä–µ–π—Ç–∏ ‚Üí</a>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–∏—Å—Ç–µ–º–µ
    fetch('/api/system-info', {
        headers: getAuthHeaders()
    })
    .then(r => r.json())
    .then(data => {
        const container = document.getElementById('system-info-container');
        container.innerHTML = `
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-value"><i class="bi bi-window"></i> ${data.os}</div>
                    <div class="stat-label">–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-value"><i class="bi bi-code-square"></i> ${data.python_version}</div>
                    <div class="stat-label">Python –≤–µ—Ä—Å–∏—è</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-value">${data.cpu_percent}%</div>
                    <div class="stat-label">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-value">${data.memory_used_gb} GB</div>
                    <div class="stat-label">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏</div>
                </div>
            </div>
        `;
    })
    .catch(err => {
        console.error('Error loading system info:', err);
        document.getElementById('system-info-container').innerHTML = 
            '<div class="col-lg-12"><p class="text-danger">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏—Å—Ç–µ–º–µ</p></div>';
    });
});
</script>
{% endblock %}
