{% extends "base.html" %}

{% block title %}Home - Trading Bot Control Panel{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-12 text-center">
        <h1><i class="bi bi-robot"></i> Trading Bot Control Panel</h1>
        <p class="lead text-muted">–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è AI-—Ç–æ—Ä–≥–æ–≤—ã–º –±–æ—Ç–æ–º</p>
    </div>
</div>

<!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π -->
<div class="row mb-5">
    <div class="col-md-6 col-lg-3 mb-3">
        <a href="/dashboard" class="text-decoration-none">
            <div class="card h-100 feature-card">
                <div class="card-body text-center">
                    <i class="bi bi-speedometer2" style="font-size: 2.5rem; color: var(--primary-color);"></i>
                    <h5 class="card-title mt-3">Dashboard</h5>
                    <p class="card-text small">–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç–∞ –∏ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</p>
                </div>
            </div>
        </a>
    </div>
    
    <div class="col-md-6 col-lg-3 mb-3">
        <a href="/config" class="text-decoration-none">
            <div class="card h-100 feature-card">
                <div class="card-body text-center">
                    <i class="bi bi-gear" style="font-size: 2.5rem; color: var(--primary-color);"></i>
                    <h5 class="card-title mt-3">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</h5>
                    <p class="card-text small">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ defaults</p>
                </div>
            </div>
        </a>
    </div>
    
    <div class="col-md-6 col-lg-3 mb-3">
        <a href="/logs-view" class="text-decoration-none">
            <div class="card h-100 feature-card">
                <div class="card-body text-center">
                    <i class="bi bi-file-text" style="font-size: 2.5rem; color: var(--primary-color);"></i>
                    <h5 class="card-title mt-3">–õ–æ–≥–∏</h5>
                    <p class="card-text small">–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ —Å –ø–æ–∏—Å–∫–æ–º –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π</p>
                </div>
            </div>
        </a>
    </div>
    
    <div class="col-md-6 col-lg-3 mb-3">
        <a href="/env-config" class="text-decoration-none">
            <div class="card h-100 feature-card">
                <div class="card-body text-center">
                    <i class="bi bi-key" style="font-size: 2.5rem; color: var(--primary-color);"></i>
                    <h5 class="card-title mt-3">Environment</h5>
                    <p class="card-text small">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ API –∫–ª—é—á–∞–º–∏</p>
                </div>
            </div>
        </a>
    </div>
</div>

<!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ -->
<div class="row mb-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h5><i class="bi bi-info-circle"></i> –û —Å–∏—Å—Ç–µ–º–µ</h5>
            </div>
            <div class="card-body">
                <div id="system-info">
                    <div class="loading-spinner">
                        <div class="spinner-border" role="status"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ –∏ —Å–æ–≤–µ—Ç—ã -->
<div class="row mb-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5><i class="bi bi-lightning-charge"></i> –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã</h5>
            </div>
            <div class="card-body">
                <button class="btn btn-outline-success w-100 mb-2" onclick="quickStart()">
                    <i class="bi bi-play-circle"></i> –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ (–Ω–∞ Testnet)
                </button>
                <button class="btn btn-outline-warning w-100 mb-2" onclick="toggleBot()">
                    <i class="bi bi-pause-circle"></i> –ü–∞—É–∑—É/–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
                </button>
                <button class="btn btn-outline-danger w-100" onclick="stopBot()">
                    <i class="bi bi-stop-circle"></i> –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞
                </button>
                <small class="text-muted d-block mt-3">
                    üí° –°–æ–≤–µ—Ç: –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ Testnet –ø–µ—Ä–µ–¥ —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ–π
                </small>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5><i class="bi bi-book"></i> –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</h5>
            </div>
            <div class="card-body">
                <a href="#" class="btn btn-outline-primary w-100 mb-2">
                    <i class="bi bi-file-earmark-pdf"></i> –ß–∏—Ç–∞—Ç—å README.md
                </a>
                <a href="#" class="btn btn-outline-primary w-100 mb-2">
                    <i class="bi bi-lightning"></i> –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω—É—Ç)
                </a>
                <a href="#" class="btn btn-outline-primary w-100">
                    <i class="bi bi-question-circle"></i> –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
                </a>
                <small class="text-muted d-block mt-3">
                    üìö –ù–∞—á–Ω–∏—Ç–µ —Å README –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
                </small>
            </div>
        </div>
    </div>
</div>

<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="stat-box">
            <div class="stat-value">LSTM 60%</div>
            <div class="stat-label">Deep Learning</div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-box">
            <div class="stat-value">MR 25%</div>
            <div class="stat-label">Mean Reversion</div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-box">
            <div class="stat-value">MS 15%</div>
            <div class="stat-label">Microstructure</div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-box">
            <div class="stat-value">100 –ø–∞—Ä</div>
            <div class="stat-label">–¢–æ—Ä–≥–æ–≤—ã–µ –ø–∞—Ä—ã</div>
        </div>
    </div>
</div>

<!-- –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å -->
<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h5><i class="bi bi-activity"></i> –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <p>
                            <strong>–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:</strong>
                            <span id="bot-status-text" class="badge bg-danger">–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</span>
                        </p>
                        <p>
                            <strong>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:</strong>
                            <span id="last-update" class="text-muted">-</span>
                        </p>
                    </div>
                    <div class="col-md-6">
                        <p>
                            <strong>–†–µ–∂–∏–º:</strong>
                            <span id="bot-mode" class="badge bg-warning">–ù–µ —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω</span>
                        </p>
                        <p>
                            <strong>–í–µ—Ä—Å–∏—è:</strong>
                            <span class="text-muted">1.0.0</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .feature-card {
        background: rgba(13, 110, 253, 0.05);
        border: 1px solid rgba(13, 110, 253, 0.2);
        transition: all 0.3s ease;
        cursor: pointer;
    }
    
    .feature-card:hover {
        background: rgba(13, 110, 253, 0.1);
        border-color: var(--primary-color);
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(13, 110, 253, 0.2);
    }
    
    .feature-card .card-body {
        padding: 30px 15px;
    }
    
    .feature-card .card-title {
        color: var(--primary-color);
        font-weight: bold;
    }
    
    .feature-card .card-text {
        color: #bdc3c7;
    }
</style>

<script>
    // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏—Å—Ç–µ–º–µ
    async function loadSystemInfo() {
        try {
            const response = await fetch('/api/system-info');
            const info = await response.json();
            
            let html = `
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>–û–°:</strong> <span class="text-muted">${info.platform}</span></p>
                        <p><strong>Python:</strong> <span class="text-muted">${info.python_version}</span></p>
                        <p><strong>CPU Cores:</strong> <span class="text-muted">${info.cpu_count}</span></p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>–ü–∞–º—è—Ç–∏:</strong> <span class="text-muted">${info.memory_used_gb}GB / ${info.memory_total_gb}GB</span></p>
                        <p><strong>–°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ:</strong> <span class="text-muted">${info.disk_free_gb}GB</span></p>
                    </div>
                </div>
            `;
            
            document.getElementById('system-info').innerHTML = html;
        } catch (error) {
            console.error('Error loading system info:', error);
        }
    }

    // –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
    function quickStart() {
        showNotification('–ö–æ–º–∞–Ω–¥–∞: python main.py --pairs 20 --interval 300 --testnet', 'info');
        alert('–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –µ—ë –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:\n\npython main.py --pairs 20 --interval 300 --testnet\n\n–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç –±–æ—Ç–∞ –Ω–∞ Testnet —Å 20 –ø–∞—Ä–∞–º–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.');
    }

    // –ü–∞—É–∑–∞/–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
    function toggleBot() {
        showNotification('–§—É–Ω–∫—Ü–∏—è –ø–∞—É–∑—ã –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞', 'warning');
    }

    // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
    function stopBot() {
        showNotification('–ù–∞–∂–º–∏—Ç–µ Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–æ—Ç–∞', 'warning');
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    document.addEventListener('DOMContentLoaded', () => {
        loadSystemInfo();
    });
</script>
{% endblock %}
